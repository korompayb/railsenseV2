<!DOCTYPE html>
<html lang="hu">
<head>
    <title>RailSense | Home</title>
    <meta http-equiv="refresh" content="10">
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <!-- Bootstrap CSS  <meta http-equiv="refresh" content="30"> ez szuksegtelen, a fejlesztes allt kellett. az oldal minden 30. masodpercben ujratolti magat  de nem feltetlen baj hogy lefrissit-->
    <link rel="stylesheet" href="{{ url_for('static', filename='css/bootestrap.min.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='mfain.css') }}">
    <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
    


    <style>
        html {
            background: rgb(34,193,195);
            background: linear-gradient(278deg, rgb(195, 63, 34) 0%, rgba(253,187,45,1) 100%);
            background-image: url("https://azutazo.hu/wp-content/uploads/2021/08/MÁV_Balaton.jpg");
            background-size: 170%;
            background-repeat: no-repeat;
            background-position: center;
            font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            color: white;
            text-shadow:
                3px 3px 0 #000,
                -1px -1px 0 #000,  
                1px -1px 0 #000,
                -1px 1px 0 #000,
                1px 1px 0 #000;
       
           

        }   

        body {
            scrollbar-width: none; /* Firefox */
        }

        body::-webkit-scrollbar {
            display: none; /* Webkit alapú böngészők (Chrome, Safari) */
        }
        

        .container {
            margin-top: 5%;
            margin-bottom: 5%;
            background-color: rgba(255, 255, 255, 0.17);
            padding: 10px;
            margin-left: auto;
            margin-right: auto;
            width: 80%;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            border-radius: 10px;
            box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
        }
        #card {
                text-shadow: none;
            }

        @media screen and (max-width: 1200px) {

            html {
                background: linear-gradient(278deg, rgb(195, 63, 34) 0%, rgba(253,187,45,1) 100%);
                background-image: url("https://azutazo.hu/wp-content/uploads/2021/08/MÁV_Balaton.jpg");
                background-position: center;
                background-size: auto;
                margin: 0px;
            }

            .container {
                width: 97%;
                text-align: center;
            }

            .right {
                
                margin: 10px;
                display: grid;
                gap: 5px; /* Példa távolság a két elem között */
            }

            .left {
                display: none;
                width: 50%;
            }

            .infos {
                text-align: left;
            }
            

            .main {
                flex-direction: row;
                border-radius: 10px;
                height: 100%;
                display:block;
                margin-left: 0px;
            }

            .icono{
                text-align: center;
                justify-content: center;
                margin-left: auto;
                margin-right: auto;
            }
        }

        

        .main {
            
            border-radius: 10px;
            height: 100%;
            display: flex;
            margin-left: 5px;
        }

        .sidebar{
            position: relative;
            border-radius: 10px;
            margin-right: 5px;
            float: left;
            display: flex;
            flex-direction: column;
            background-color: white;
            
        }

        .panel {   
            background-color: rgba(255, 255, 255, 0.33);
            padding: 5px;
            
            border-radius: 10px;
            display: flexbox;
            flex-direction: row;
            
      
        }

        .right {
            flex: 1;
            margin: 10px;
            display: grid;
            gap: 5px; /* Példa távolság a két elem között */
        }
        .left {
            flex: 1;
            margin: 10px;
            overflow: hidden;
        }

        .left img {
            border-radius: 10px;
            object-fit: cover;
        }

        

        .card {
            background-color: #f5f5f564;
            border-radius: 10px;
            padding: 5px;
            display: flex;
            text-shadow: none ;
        }



        .card img {
            border-radius: 10px;
            flex: 1;
            flex-direction: column;
            
        }

        .card p {
            padding-left: 5px;
            flex: 5;
            flex-direction: column;
            
        }



        .infos {
            display: grid;
            grid-template-columns: auto auto; /* Mindkét elem automatikus szélességet kapjon */
            gap: 10px; /* Példa távolság a két elem között */
        }

        .sidebar button {
            padding-top: 10px;
            padding-bottom: 10px;
        }

        .box-green {
            background-color: rgba(32, 199, 32, 0.198);
            border-radius: 10px;
            justify-content: center;
            text-align: center;
            padding: 10px;
            color: greenyellow;
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }

        .box-red {
            background-color: rgba(199, 43, 32, 0.198);
            border-radius: 10px;
            justify-content: center;
            text-align: center;
            padding: 10px;
            color: rgb(255, 47, 47);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }

        .box-yellow {
            background-color: rgba(199, 196, 32, 0.198);
            border-radius: 10px;
            justify-content: center;
            text-align: center;
            padding: 10px;
            color: rgb(255, 231, 47);
            -webkit-backdrop-filter: blur(10px);
            backdrop-filter: blur(10px);
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
        }

        .vertical-menu {
            width: 70px; /* Csak az ikonok miatt szűkebbítettük a menüt */
            background-color: #ffffff49;
            border-radius: 10px;
            overflow: hidden;
            float: left;
            box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            
            
        }

        .vertical-menu a {
            display: block;
            padding: 30px 0; /* Kisebb padding az ikonok körül */
            text-decoration: none;
            color: #000;
            transition: background-color 0.3s;
            
        }

        .vertical-menu a:hover {
            background-color: #f4f4f4b0;
        }

        .vertical-menu a.active {
            background-color: #ffffff;
        }

        /* SVG ikonokhoz */
        .vertical-menu svg {
            display: block;
            margin: 0 auto; /* Ikonok középre igazítása */
        }

        .vertical-menu a svg {
            stroke: black;
            transition: stroke 0.3s;
        }

        .vertical-menu a svg:hover {
            stroke: rgb(0, 0, 0);
        }

        .vertical-menu a.active svg {
            fill: rgb(0, 0, 0);
            stroke: none;
        }

            
    </style>
</head>
<body>
    <div class="container">
        <div class="window">
            <nav class="vertical-menu">
                <a class="active" href="#">
                    <svg class="active" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
                </a>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>
                </a>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M400-120q-66 0-113-47t-47-113q0-66 47-113t113-47q23 0 42.5 5.5T480-418v-422h240v160H560v400q0 66-47 113t-113 47Z"/></svg>
                </a>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"/></svg>
                </a>
                <a href="#">
                    <svg xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="m370-80-16-128q-13-5-24.5-12T307-235l-119 50L78-375l103-78q-1-7-1-13.5v-27q0-6.5 1-13.5L78-585l110-190 119 50q11-8 23-15t24-12l16-128h220l16 128q13 5 24.5 12t22.5 15l119-50 110 190-103 78q1 7 1 13.5v27q0 6.5-2 13.5l103 78-110 190-118-50q-11 8-23 15t-24 12L590-80H370Zm70-80h79l14-106q31-8 57.5-23.5T639-327l99 41 39-68-86-65q5-14 7-29.5t2-31.5q0-16-2-31.5t-7-29.5l86-65-39-68-99 42q-22-23-48.5-38.5T533-694l-13-106h-79l-14 106q-31 8-57.5 23.5T321-633l-99-41-39 68 86 64q-5 15-7 30t-2 32q0 16 2 31t7 30l-86 65 39 68 99-42q22 23 48.5 38.5T427-266l13 106Zm42-180q58 0 99-41t41-99q0-58-41-99t-99-41q-59 0-99.5 41T342-480q0 58 40.5 99t99.5 41Zm-2-140Z"/></svg>
                </a>
            </nav>
            </ul>
            <div class="main">
                <div class="right">
                    <div class="panel">
                        <h1 id="welcome"></h1>
                        <h4 id="date"></h4>
                        <p class="icono" style="background-color: #eeeeee5c; border-radius: 10px; width: min-content;" id="location-name"><span id="weather-icon"></span></p>
                        <p id="wind"></p>
                        <p id="weather-data"></p>
                        <div id="card" class="swipeable-box {% if result_status == 1 %}box-red{% elif result_status == 2 %}box-green {% elif result_status == 3 %}box-orange{% endif %}">
                            <h1 style="padding-top: 10px;">{% if result_status == 1 %}Az átkelés veszélyes!{% elif result_status == 2 %}Az átkelés szabad!{% elif result_status == 3 %}Hiba: Error code 2{% endif %}</h1>
                            <h3 id="sub-title">{% if result_status == 1 %}Vonat érkezik:{% elif result_status == 2 %}Nincs vonat a közelben!{% elif result_status == 3 %}<a href="https://forms.gle/nb49zoTMinVZVxsv5">Hiba lépett fel, kérjük lépjen kapcsolatba a fejlesztővel!</a>{% endif %}</h3>
                            <p id="sub-p">
                                {% if result_status == 1 %} {% if directions %}{% for direction in directions %}{{ direction }}{% endfor %}{% endif %} -irányban. {% elif result_status == 2 %}    {% if message %}{{ message }}{% endif %} {% elif result_status == 3 %}Hiba: Error code 3{% endif %}
                                <br>
                                {% if result_status == 1 %}{{ message }}{% elif result_status == 2 %}{% elif result_status == 3 %}Hiba: Error code 2{% endif %}
                            </p>
                            <p id="sub-f" style="font-family: Consolas,monaco,monospace; text-decoration:underline;">Frissítve: {{ update_time }}</p>
                
                        </div>        
                    </div>
            
                    
                    <div class="infos">
                        <h2>Ez is tetszeni fog</h2>
                    </div>
                    <div class="card">
                        <img src="" alt="icon" width="50px" height="50px">
                        
                        <div class="arrow">&#8594;</div>
                    </div>
                    <div class="card">
                        <img src="" alt="icon" width="50px" height="50px">
                        <p>Infoponttok csak könnyedén</p>
                    </div>
                    <div class="card">
                        <img src="" alt="icon" width="50px" height="50px">
                        <p>Infoponttok csak könnyedén</p>
                    </div>
                    <div class="card">
                        <img src="" alt="icon" width="50px" height="50px">
                        <p>Infoponttok csak könnyedén</p>
                    </div>
                    <div class="card">
                        <img src="" alt="icon" width="50px" height="50px">
                        <p>Infoponttok csak könnyedén</p>
                    </div>
                </div>    
                <div class="left">
                    <img src="https://hirtv.hu/data/cikkek/2497/24972/cikk-2497280/shutterstock_519097594.jpg"  width="100%" height="100%">
                </div>
            </div>
        </div>
    </div>



    <script>

        const openButton = document.querySelector("[data-open-modal]")
        const closeButton = document.querySelector("[data-close-modal]")
        const modal = document.querySelector("[data-modal]")
        
        openButton.addEventListener("click", () => {
            modal.showModal()
        })


    </script>

    <script>
        document.addEventListener("DOMContentLoaded", function() {
          // jelenlegi datum
          var currentDate = new Date();
          var options = { year: 'numeric', month: 'short', day: 'numeric' };
          var formattedDate = currentDate.toLocaleDateString('hu-HU', options);
    
          // datum kiiras
          var dateElement = document.getElementById('date');
          dateElement.innerHTML = formattedDate;
    
          // udvozlo uzenet az idotol fuggoen
          var welcomeElement = document.getElementById('welcome');
          var currentHour = currentDate.getHours();
          var welcomeMessage = '';
    
          if (currentHour >= 5 && currentHour < 12) {
            welcomeMessage = 'Jó reggelt!';
          } else if (currentHour >= 12 && currentHour < 18) {
            welcomeMessage = 'Szép napot!';
          } else {
            welcomeMessage = 'Jó estét!';
          }
    
          welcomeElement.innerHTML = welcomeMessage;
    
          // idojaras lekerese
          fetch('https://api.openweathermap.org/data/2.5/weather?q=Balatonfuzfo&appid=c01a7a32d2b862992d67500569e20363&units=metric&lang=hu')
            .then(response => response.json())
            .then(data => {
                // temperature, weather description, and wind speed
                const temperature = Math.round(data.main.temp);
                const feelsLike = Math.round(data.main.feels_like);
                const iconCode = data.weather[0].icon;
                const windSpeed = data.wind.speed * 3.6 // m/s -> km/h             //1.94384; // m/s -> csomo
    
                // kiiras
    
                const iconElement = document.getElementById('weather-icon');
                const windElement = document.getElementById('wind');
                const weatherDataElement = document.getElementById('weather-data');
    
                // idojaras icon
                const iconUrl = `http://openweathermap.org/img/wn/${iconCode}@2x.png`;
                iconElement.innerHTML = `<img src="${iconUrl}" id="seal-image" alt="Weather Icon" style="width: 65px; height: 65px;">`;
    
                // csomo szamlalo szinei
                if (windSpeed >= 0 && windSpeed <= 21) {
                  windElement.innerHTML = `Szélsebesség: <span style="color: green">${windSpeed.toFixed(2)}</span> km/h.`;
                } else if (windSpeed >= 22 && windSpeed <= 23) {
                  windElement.innerHTML = `Szélsebesség: <span style="color: orange">${windSpeed.toFixed(2)}</span> km/h.`;
                } else if (windSpeed >= 24 && windSpeed <= 65) {
                  windElement.innerHTML = `Szélsebesség: <span style="color: red">${windSpeed.toFixed(2)}</span> km/h.`;
                }
    
                // homerseklet szinei
                if (temperature >= 0 && temperature <= 16) {
                  weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: blue">${temperature} &deg;C`;
                } else if (temperature >= 17 && temperature <= 30) {
                  weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: orange">${temperature} &deg;C`;
                } else if (temperature >= 30 && temperature <= 50) {
                  weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: red">${temperature} &deg;C`;
                }
            })
            .catch(error => {
                console.log('Error fetching weather data:', error);
            });
        });
    
        var swipeableBox = document.getElementById('swipeable-box');
        swipeableBox.addEventListener('click', function() {
          swipeableBox.classList.toggle('expanded');
        });
    </script>

</body>
</html>
