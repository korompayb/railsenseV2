<!DOCTYPE html>
<html lang="hu">
    <head>
        <meta http-equiv="refresh" content="10">
        <meta charset="UTF-8">
        <meta name="viewport" content="width=device-width, initial-scale=1.0">
        <title>RailSense - Verzió 2.0</title>
        <link rel="stylesheet" href="{{ url_for('static', filename='maisn.css') }}">
        <link rel="icon" href="{{ url_for('static', filename='favicon.ico') }}" type="image/x-icon">
        <link rel="stylesheet" href="{{ url_for('static', filename='css/bootstrap.min.css') }}">
        <link rel="stylesheet" href="../static/css/bootstrap.min.css">
        <link rel="stylesheet" href="../static/css/bootsrap.min.css">
        
        <style>
            html {
                background: rgb(34,193,195);
                background: linear-gradient(278deg, rgb(195, 63, 34) 0%, rgba(253,187,45,1) 100%);
                background-image: url("https://azutazo.hu/wp-content/uploads/2021/08/MÁV_Balaton.jpg");
                background-attachment: fixed;
                background-size: cover;
                background-repeat: no-repeat;
                background-position-x: center;
                font-family:'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
                
            }   
    
            .container {
                background-color: rgba(255, 255, 255, 0.109);
               
                border: 6px inset rgb(255, 255, 255);
                border: 1px outset rgb(255, 255, 255);
                padding: 0px;
                
                width: 80%;
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
                border-radius: 10px;
                box-shadow: rgba(0, 0, 0, 0.25) 0px 54px 55px, rgba(0, 0, 0, 0.12) 0px -12px 30px, rgba(0, 0, 0, 0.12) 0px 4px 6px, rgba(0, 0, 0, 0.17) 0px 12px 13px, rgba(0, 0, 0, 0.09) 0px -3px 5px;
            }
    
            body{
                background-color: transparent;
            }
            
            .icno {
                fill: rgb(0, 0, 0);
            }
    
            .active {
                fill: rgb(255, 255, 255);
            }
    
            .picturesoftheday {
                border-radius: 10px;
                object-fit: cover;
            }
           
            .box-green {
                background-color: rgba(32, 199, 32, 0.198);
                border-radius: 10px;
                justify-content: center;
                text-align: center;
                padding: 10px;
                color: greenyellow;
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            }

            .box-red {
                background-color: rgba(199, 43, 32, 0.198);
                border-radius: 10px;
                justify-content: center;
                text-align: center;
                padding: 10px;
                color: rgb(255, 47, 47);
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            }

            .box-yellow {
                background-color: rgba(199, 196, 32, 0.198);
                border-radius: 10px;
                justify-content: center;
                text-align: center;
                padding: 10px;
                color: rgb(255, 231, 47);
                -webkit-backdrop-filter: blur(10px);
                backdrop-filter: blur(10px);
                box-shadow: rgba(0, 0, 0, 0.35) 0px 5px 15px;
            }


            @media screen and (max-width: 700px) {
                html {
                    /*background-image: url("../static/rajz2.png");*/
                    background-size: cover;
                    
                    
                }

                .container {
                    background-color: #ffffff4f;
                    width: 97%;
                    text-align: center;
                    position: relative;
                    margin-top: 55%;
                }
            }


            /*osx theme*/
            .outer {
                display: none; /*ha ezt kiszeded akkor a MacOS felület lesz*/
            background: #b4b4b4;
            opacity: 0.9;
            width: auto;
            
            padding: 10px;
            border-radius: 7px 7px 0px 0px;
            
            &.dark {
                background: #273138;
                
                .dot {
                background: #4a5c66;
                }
            }

            &.yosemite {
                background: #f6f6f6; /* Old browsers */
                background: -moz-linear-gradient(top,  #f6f6f6 0%, #dadada 100%); /* FF3.6+ */
                background: -webkit-gradient(linear, left top, left bottom, color-stop(0%,#f6f6f6), color-stop(100%,#dadada)); /* Chrome,Safari4+ */
                background: -webkit-linear-gradient(top,  #f6f6f6 0%,#dadada 100%); /* Chrome10+,Safari5.1+ */
                background: -o-linear-gradient(top,  #f6f6f6 0%,#dadada 100%); /* Opera 11.10+ */
                background: -ms-linear-gradient(top,  #f6f6f6 0%,#dadada 100%); /* IE10+ */
                background: linear-gradient(to bottom,  #f6f6f6 0%,#dadada 100%); /* W3C */
                filter: progid:DXImageTransform.Microsoft.gradient( startColorstr='#f6f6f6', endColorstr='#dadada',GradientType=0 ); /* IE6-9 */
                border: 1px solid #d8d8d8;
                border-bottom: 1px solid #b4b4b4;
            }
            }

            .dot {
            display: inline-block;
            width: 10px;
            height: 10px;
            background: #f9f9f9;
            border-radius: 50%;
            margin: 0 4px 0 0;
            
            &.red {
                background: #FF6057;
                border: 1px solid #E14640;
            }

            &.amber {
                background: #FFBD2E;
                border: 1px solid #DFA123;
            }

            &.green {
                background: #27C93F;
                border: 1px solid #1DAD2B;
            }
            }

            .window {
                padding: 10px;
            }

            .card {
                margin-bottom: 5px;
                
            }
    
        </style>
    </head>
    <body>
        
        <div class="container position-absolute top-50 start-50 translate-middle">
            <div class="outer yosemite">
                <div class="dot red"></div>
                <div class="dot amber"></div>
                <div class="dot green"></div>
           </div>
            <div class="window">
                <div class="row">
                    <div class="col-md-1">
                        <div class="d-flex flex-column flex-shrink-0 bg-light" style="width: 4.5rem; border-radius: 10px; height: 100%;">
                            <a href="/" class="d-block p-3 link-dark text-decoration-none" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="RailSense">
                              <img src="../static/favicon.ico" alt="" class="img-fluid">
                              <span class="visually-hidden">RailSense</span>
                            </a>
                            <ul class="nav nav-pills nav-flush flex-column mb-auto text-center">
                              <li class="nav-item">
                                <a href="#" class="nav-link active py-3 border-bottom" aria-current="page" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Főmenü">
                                    <svg  class=" icno active" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M240-200h120v-240h240v240h120v-360L480-740 240-560v360Zm-80 80v-480l320-240 320 240v480H520v-240h-80v240H160Zm320-350Z"/></svg>
                                </a>
                              </li>
                              <li>
                                <a href="#" class="nav-link py-3 border-bottom" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Térkép nézet">
                                    <svg class="icno" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M480-480q33 0 56.5-23.5T560-560q0-33-23.5-56.5T480-640q-33 0-56.5 23.5T400-560q0 33 23.5 56.5T480-480Zm0 294q122-112 181-203.5T720-552q0-109-69.5-178.5T480-800q-101 0-170.5 69.5T240-552q0 71 59 162.5T480-186Zm0 106Q319-217 239.5-334.5T160-552q0-150 96.5-239T480-880q127 0 223.5 89T800-552q0 100-79.5 217.5T480-80Zm0-480Z"/></svg>
                                </a>
                              </li>
                              <li>
                                <a href="#" class="nav-link py-3 border-bottom" title="" data-bs-toggle="tooltip" data-bs-placement="right" data-bs-original-title="Zenék">
                                    <svg class="icno" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M400-120q-66 0-113-47t-47-113q0-66 47-113t113-47q23 0 42.5 5.5T480-418v-422h240v160H560v400q0 66-47 113t-113 47Z"/></svg>
                                </a>
                              </li>
                            </ul>
                            <div class="dropdown border-top">
                              <a href="#" class="d-flex align-items-center justify-content-center p-3 link-dark text-decoration-none dropdown-toggle" id="dropdownUser1" data-bs-toggle="dropdown" aria-expanded="false" >
                                <svg class="icno" xmlns="http://www.w3.org/2000/svg" height="24" viewBox="0 -960 960 960" width="24"><path d="M234-276q51-39 114-61.5T480-360q69 0 132 22.5T726-276q35-41 54.5-93T800-480q0-133-93.5-226.5T480-800q-133 0-226.5 93.5T160-480q0 59 19.5 111t54.5 93Zm246-164q-59 0-99.5-40.5T340-580q0-59 40.5-99.5T480-720q59 0 99.5 40.5T620-580q0 59-40.5 99.5T480-440Zm0 360q-83 0-156-31.5T197-197q-54-54-85.5-127T80-480q0-83 31.5-156T197-763q54-54 127-85.5T480-880q83 0 156 31.5T763-763q54 54 85.5 127T880-480q0 83-31.5 156T763-197q-54 54-127 85.5T480-80Zm0-80q53 0 100-15.5t86-44.5q-39-29-86-44.5T480-280q-53 0-100 15.5T294-220q39 29 86 44.5T480-160Zm0-360q26 0 43-17t17-43q0-26-17-43t-43-17q-26 0-43 17t-17 43q0 26 17 43t43 17Zm0-60Zm0 360Z"/></svg>
                              </a>
                              <ul class="dropdown-menu text-small shadow" aria-labelledby="dropdownUser3">
                                <li><a class="dropdown-item" href="#">Beállítások</a></li>
                                <li><a class="dropdown-item" href="#">Klasszikus nézetre váltás</a></li>
                                <li><a class="dropdown-item" href="#">Profilod</a></li>
                                <li><hr class="dropdown-divider"></li>
                                <li><a class="dropdown-item" href="#">Kilépés</a></li>
                              </ul>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-6">
                        <div class="col-sm">
                            <h1 class="text-center" id="welcome"></h1>
                            <h4 class="text-center" id="date"></h4>
                            <br><br>
                            <div class="row">
                                <div class="col-sm-2">
                                    <p class="icono img-fluid" style="background-color: #eeeeee5c; border-radius: 10px; width: max-content; height: auto;" id="location-name">
                                        <span id="weather-icon"></span>
                                    </p>
                                </div>
                                <div class="col-sm">
                                    <h4 id="wind"></h4>
                                    <h4 id="weather-data"></h4>
                                </div>
                            </div>
                            <div id="card" class="swipeable-box {% if result_status == 1 %}box-red{% elif result_status == 2 %}box-green {% elif result_status == 3 %}box-orange{% endif %}">
                                <h1 style="padding-top: 10px;">{% if result_status == 1 %}Az átkelés veszélyes!{% elif result_status == 2 %}Az átkelés szabad!{% elif result_status == 3 %}Hiba: Error code 2{% endif %}</h1>
                                <h3 id="sub-title">{% if result_status == 1 %}Vonat érkezik:{% elif result_status == 2 %}Nincs vonat a közelben!{% elif result_status == 3 %}<a href="https://forms.gle/nb49zoTMinVZVxsv5">Hiba lépett fel, kérjük lépjen kapcsolatba a fejlesztővel!</a>{% endif %}</h3>
                                <p id="sub-p">
                                    {% if result_status == 1 %} {% if directions %}{% for direction in directions %}{{ direction }}{% endfor %}{% endif %} -irányban. {% elif result_status == 2 %}    {% if message %}{{ message }}{% endif %} {% elif result_status == 3 %}Hiba: Error code 3{% endif %}
                                    <br>
                                    {% if result_status == 1 %}{{ message }}{% elif result_status == 2 %}{% elif result_status == 3 %}Hiba: Error code 2{% endif %}
                                </p>
                                <p id="sub-f" style="font-family: Consolas,monaco,monospace; text-decoration:underline;">Frissítve: {{ update_time }}</p>
                    
                            </div>
                        </div>
                        <div class="col-sm">
                            <h3 class="text-white">Korábbi vonatok:</h3>
                            <div class="card text-white" style=" background-color: #ffffff26;">
                                <div class="card-body">
                                  <h5 class="card-title">{train1}</h5>
                                  <h6 class="card-subtitle mb-2" style="color: #d0d0d0;">{direction}</h6>
                                  <p class="card-text">{update_time}</p>
                                  <a href="#" class="card-link">{MAV}</a>
                                </div>
                            </div>
                            <div class="card text-white" style=" background-color: #ffffff26;">
                                <div class="card-body">
                                  <h5 class="card-title">{train1}</h5>
                                  <h6 class="card-subtitle mb-2" style="color: #d0d0d0;">{direction}</h6>
                                  <p class="card-text">{update_time}</p>
                                  <a href="#" class="card-link">{MAV}</a>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="col-md-5">
                        <img class="picturesoftheday" src="https://hirtv.hu/data/cikkek/2497/24972/cikk-2497280/shutterstock_519097594.jpg"  width="100%" height="100%">
                    </div>
                </div>
            </div>
        </div>
        <script src="bootstrap.bundle.min.js" ></script>
        <script src="{{ url_for('static', filename='js/bootstrap.bundle.min.js') }}"></script>
        
        <script>
            /* global bootstrap: false */
            (function () {
            'use strict'
            var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
            tooltipTriggerList.forEach(function (tooltipTriggerEl) {
                new bootstrap.Tooltip(tooltipTriggerEl)
            })
            })()
    
        </script>
        <script>

            const openButton = document.querySelector("[data-open-modal]")
            const closeButton = document.querySelector("[data-close-modal]")
            const modal = document.querySelector("[data-modal]")
            
            openButton.addEventListener("click", () => {
                modal.showModal()
            })
    
    
        </script>
    
        <script>
            document.addEventListener("DOMContentLoaded", function() {
              // jelenlegi datum
              var currentDate = new Date();
              var options = { year: 'numeric', month: 'short', day: 'numeric' };
              var formattedDate = currentDate.toLocaleDateString('hu-HU', options);
        
              // datum kiiras
              var dateElement = document.getElementById('date');
              dateElement.innerHTML = formattedDate;
        
              // udvozlo uzenet az idotol fuggoen
              var welcomeElement = document.getElementById('welcome');
              var currentHour = currentDate.getHours();
              var welcomeMessage = '';
        
              if (currentHour >= 5 && currentHour < 12) {
                welcomeMessage = 'Jó reggelt!';
              } else if (currentHour >= 12 && currentHour < 18) {
                welcomeMessage = 'Szép napot!';
              } else {
                welcomeMessage = 'Jó estét!';
              }
        
              welcomeElement.innerHTML = welcomeMessage;
        
              // idojaras lekerese
              fetch('https://api.openweathermap.org/data/2.5/weather?q=Balatonfuzfo&appid=c01a7a32d2b862992d67500569e20363&units=metric&lang=hu')
                .then(response => response.json())
                .then(data => {
                    // temperature, weather description, and wind speed
                    const temperature = Math.round(data.main.temp);
                    const feelsLike = Math.round(data.main.feels_like);
                    const iconCode = data.weather[0].icon;
                    const windSpeed = data.wind.speed * 3.6 // m/s -> km/h             //1.94384; // m/s -> csomo
        
                    // kiiras
        
                    const iconElement = document.getElementById('weather-icon');
                    const windElement = document.getElementById('wind');
                    const weatherDataElement = document.getElementById('weather-data');
        
                    // idojaras icon
                    const iconUrl = `http://openweathermap.org/img/wn/${iconCode}@2x.png`;
                    iconElement.innerHTML = `<img src="${iconUrl}" id="seal-image" alt="Weather Icon" style="width: 65px; height: 65px;">`;
        
                    // csomo szamlalo szinei
                    if (windSpeed >= 0 && windSpeed <= 21) {
                      windElement.innerHTML = `Szélsebesség: <span style="color: green">${windSpeed.toFixed(2)}</span> km/h.`;
                    } else if (windSpeed >= 22 && windSpeed <= 23) {
                      windElement.innerHTML = `Szélsebesség: <span style="color: orange">${windSpeed.toFixed(2)}</span> km/h.`;
                    } else if (windSpeed >= 24 && windSpeed <= 65) {
                      windElement.innerHTML = `Szélsebesség: <span style="color: red">${windSpeed.toFixed(2)}</span> km/h.`;
                    }
        
                    // homerseklet szinei
                    if (temperature >= 0 && temperature <= 16) {
                      weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: blue">${temperature} &deg;C`;
                    } else if (temperature >= 17 && temperature <= 30) {
                      weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: orange">${temperature} &deg;C`;
                    } else if (temperature >= 30 && temperature <= 50) {
                      weatherDataElement.innerHTML = `Hőmérséklet: <span style="color: red">${temperature} &deg;C`;
                    }
                })
                .catch(error => {
                    console.log('Error fetching weather data:', error);
                });
            });
        
            var swipeableBox = document.getElementById('swipeable-box');
            swipeableBox.addEventListener('click', function() {
              swipeableBox.classList.toggle('expanded');
            });
        </script>
    </body>
</html>
